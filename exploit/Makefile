# Compiler and linker commands
TCC = tcc
TCC_FLAGS = -nostdlib -static

# Directories
SRC_DIR = .
BUILD_DIR = build

# File lists
C_FILES = $(wildcard $(SRC_DIR)/*.c)
C_BINS = $(patsubst $(SRC_DIR)/%.c, $(BUILD_DIR)/%, $(C_FILES))

# Targets
.PHONY: all exploit clean

all: exploit

exploit: $(C_BINS)

# Compile exploit files
$(BUILD_DIR)/%: $(SRC_DIR)/%.c
	@mkdir -p $(BUILD_DIR)
	$(TCC) $(TCC_FLAGS) -o $@ $<

# Clean up
clean:
	rm -rf $(BUILD_DIR)
