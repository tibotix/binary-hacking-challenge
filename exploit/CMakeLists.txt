cmake_minimum_required(VERSION 2.15)

set(CMAKE_C_COMPILER /usr/bin/tcc)
set(CMAKE_LINKER /usr/bin/tcc)

project(exploit)

get_filename_component(PARENT_DIR "${CMAKE_CURRENT_SOURCE_DIR}/../" ABSOLUTE)
add_subdirectory("${PARENT_DIR}/minik" "${CMAKE_BINARY_DIR}/minik")

file(GLOB exploit_sources "exploit.c")
add_executable(exploit ${exploit_sources})
target_link_libraries(exploit minik)
target_include_directories(exploit PUBLIC ${minik_SOURCE_DIR})
target_compile_options(exploit PUBLIC -std=c11)
target_link_options(exploit PUBLIC -nostdlib -static)
